{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import 'babel-polyfill'\nimport React from 'react'\nimport {Component} from 'react'\nimport blessed from 'blessed'\nimport {Provider, connect} from 'react-redux'\nimport {render} from 'react-blessed'\nimport functional from 'react-functional'\nimport {waitUntilUsed} from 'tcp-port-used'\nimport createStore from './store/create'\nimport config from './config'\nimport { Console, Sources } from './containers'\nimport { Tabs } from './components'\nimport createDebugger from './lib/debug'\nimport {\n  focusTab,\n  focusPanel,\n  receiveFiles,\n  receiveCallstack,\n  receiveBreakpoints,\n  receiveScope,\n  receiveSource,\n  pause,\n  resume,\n  stepOver,\n  stepInto,\n  stepOut,\n  nextFrame,\n  previousFrame\n} from './actions'\n\nconst store = createStore({\n  tab: 'sources',\n  panel: 'editor',\n  files: ['file one', 'file two'],\n  source: '',\n  layout: config.layout,\n})\nconst {dispatch} = store\nconst tabs = ['Sources', 'Networking', 'Profiling', 'Console']\n\nlet Devtools = ({layout, tab}) => {\n  return (\n    <element>\n      <Tabs dispatch={dispatch} items={tabs} {...layout.tabs}/>\n      {tab === 'sources' && <Sources/>}\n      {tab === 'console' && <Console/>}\n    </element>\n  )\n}\n\nDevtools = connect(({layout, tab}) => ({layout, tab}))(Devtools)\n\nexport const debug = createDebugger()\n\nexport default async (pid) => {\n  const debugPort = 5858\n\n  // if (pid) { \n    // process.kill(pid, 'SIGUSR1')\n    // await waitUntilUsed(debugPort)\n  // }\n\n\n  const screen = blessed.screen({\n    autoPadding: true,\n    smartCSR: true,\n    title: 'Terminal Devtools',\n    sendFocus: true,\n    dockBorders: true,\n    autoPadding: true,\n    log: '/dev/ttys001',\n    ignoreLocked: ['C-c']\n  })\n\n  console.log = screen.log.bind(screen)\n  console.error = screen.log.bind(screen, 'ERROR: ')\n\n  debug.start(debugPort, (err, {source, bp: {callFrames: callstack}}) => {\n    dispatch(receiveSource(source))\n    dispatch(receiveCallstack(callstack))\n  })\n\n  screen.key(['escape', 'q', 'C-c'], function(ch, key) {\n    return process.exit(0);\n  })\n\n  screen.key(['C-t'], () => dispatch(focusPanel('editor')))\n  screen.key(['C-n'], () => dispatch(focusPanel('navigator')))\n  screen.key(['C-o'], () => dispatch(focusPanel('scope')))\n  screen.key(['C-k'], () => dispatch(focusPanel('console')))\n  screen.key(['C-s'], () => dispatch(focusPanel('callstack')))\n  screen.key(['C-p'], () => dispatch(focusPanel('breakpoints')))\n\n  screen.key(['F8', 'C-r', 'r'], () => dispatch(resume()))\n  screen.key(['S-F8', 'C-S-\\\\', 'p'], () => dispatch(pause()))\n  screen.key(['F10', 'C-\\'', 'n'], () => dispatch(stepOver()))\n\n\n\n  return render(\n    <Provider store={store}>\n      <Devtools/>\n    </Provider>\n  , screen)\n\n}"]}