{"version":3,"sources":["../../../src/components/Console/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react'\nimport functional from 'react-functional'\nimport * as style from '../../style'\n\n/* eslint-disable react/no-unknown-property */\n\nconst Console = ({top, left, width, height, focused, independent, tooltips, output, actions}, cmp) => {\n  return (\n    <textarea\n      ref={el => {\n        cmp.el = el\n        // hack :(\n        if (el && independent && focused) cmp.el.focus()\n      }}\n      keys\n      vi\n      mouse\n      label='Console'\n      inputOnFocus\n      focused={focused}\n      class={[style.panel, focused && style.selected]}\n      top={top}\n      left={left}\n      width={width}\n      height={height}\n      hoverText={actions && tooltips && 'ctrl+k'}\n      value={\n        output.all + '> ' + (\n          output.historyIndex ? \n            output.history.slice(output.historyIndex).shift() : \n            ''\n        )\n      }\n      onFocus={() => (independent || focused || actions.focusPanel('console'))}\n      onKeyTab={() => {\n        if (independent) {\n          actions.focusTab('sources')\n          actions.focusPanel('console')\n          return\n        }\n        cmp.el._done()\n        actions.focusPanel('navigator')\n      }}\n      onKeyUp={() => {\n        try {\n        actions.consoleHistory({step: -1})\n      } catch (e) { console.log(e.stack) }\n        console.log(output)\n      }}\n      onKeyDown={() => {\n        actions.consoleHistory({step: 1})\n        console.log(output)\n      }}\n      onKeypress={(ch, key) => {\n        if (key.name === 'return' && !key.shift) {\n          const lines = cmp.el.getLines()\n          const cmd = lines[lines.length - 2].substr(2)\n          actions.consoleInput(cmd)\n          return\n        }\n        if (independent) {\n          if (key.name === 'escape') {\n            // hack :( - avoids intermittent crashing\n            setTimeout(() => {\n              actions.focusTab('sources')\n              actions.focusPanel('console')\n            })\n          }\n        }\n      }}\n    />\n  )\n}\n\nexport default functional(Console)\n"]}