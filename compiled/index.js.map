{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import 'babel-polyfill'\nimport React from 'react'\nimport {Component} from 'react'\nimport blessed from 'blessed'\nimport {Provider, connect} from 'react-redux'\nimport {render} from 'react-blessed'\nimport functional from 'react-functional'\nimport portly from 'portly'\nimport createStore from './store/create'\nimport config from './config'\nimport { Console, Sources } from './containers'\nimport { Tabs } from './components'\nimport createDebugger from './lib/debug'\nimport {\n  focusTab,\n  focusPanel,\n  receiveCallstack,\n  receiveBreakpoints,\n  receiveScope,\n  receiveSource,\n  receiveSources,\n  selectFile,\n  pause,\n  resume,\n  stepOver,\n  stepInto,\n  stepOut,\n  nextFrame,\n  previousFrame\n} from './actions'\n\nconst store = createStore({\n  tab: 'sources',\n  panel: 'editor',\n  layout: config.layout,\n})\nconst {dispatch} = store\nconst tabs = ['Sources', 'Networking', 'Profiling', 'Console']\n\nlet Devtools = ({layout, tab}) => {\n  return (\n    <element>\n      <Tabs dispatch={dispatch} items={tabs} {...layout.tabs}/>\n      {tab === 'sources' && <Sources/>}\n      {tab === 'console' && <Console/>}\n    </element>\n  )\n}\n\nDevtools = connect(({layout, tab}) => ({layout, tab}))(Devtools)\n\nexport const debug = createDebugger()\n\nexport default async (pid) => {\n  const debugPort = 5858\n\n  if (pid) { \n    process.kill(pid, 'SIGUSR1')\n  }\n\n  const screen = blessed.screen({\n    autoPadding: true,\n    smartCSR: true,\n    title: 'Terminal Devtools',\n    sendFocus: true,\n    dockBorders: true,\n    autoPadding: true,\n    log: '/dev/ttys004',\n    ignoreLocked: ['C-c']\n  })\n\n  console.log = screen.log.bind(screen)\n  console.error = screen.log.bind(screen, 'ERROR: ')\n\n  dispatch(receiveSource('Waiting for port debug port ' + debugPort))\n  portly(debugPort).then(portPid => {\n    debug.start(debugPort, \n      err => {\n        debug.scripts((err, scripts) => {\n          const firstNonInternal = scripts.find(s => s.name[0] === '/')\n          dispatch(receiveSource(\n            firstNonInternal ? firstNonInternal.source : scripts[0].source\n          ))\n          dispatch(receiveSources(scripts))\n          dispatch(selectFile(\n            firstNonInternal ? firstNonInternal.name : scripts[0].name\n          ))\n        })\n      },\n      (err, {source, bp: {callFrames: callstack}}) => {\n        dispatch(receiveSource(source))\n        dispatch(receiveCallstack(callstack))\n        dispatch(selectFile(callstack[0].location))\n      })\n  })\n\n\n  screen.key(['escape', 'q', 'C-c'], function(ch, key) {\n    return process.exit(0);\n  })\n\n  screen.key(['C-t'], () => dispatch(focusPanel('editor')))\n  screen.key(['C-n'], () => dispatch(focusPanel('navigator')))\n  screen.key(['C-o'], () => dispatch(focusPanel('scope')))\n  screen.key(['C-k'], () => dispatch(focusPanel('console')))\n  screen.key(['C-s'], () => dispatch(focusPanel('callstack')))\n  screen.key(['C-p'], () => dispatch(focusPanel('breakpoints')))\n\n  screen.key(['F8', 'C-\\\\', 'r'], () => dispatch(resume()))\n  screen.key(['S-F8', 'C-S-\\\\', 'p'], () => dispatch(pause()))\n  screen.key(['F10', 'C-\\'', 'n'], () => dispatch(stepOver()))\n\n\n  return render(\n    <Provider store={store}>\n      <Devtools/>\n    </Provider>\n  , screen)\n\n}"]}