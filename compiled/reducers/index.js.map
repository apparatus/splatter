{"version":3,"sources":["../../src/reducers/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import {basename, sep} from 'path'\n\nimport {\n  FOCUS_TAB,\n  FOCUS_PANEL,\n  RECEIVE_CALLSTACK,\n  RECEIVE_BREAKPOINTS,\n  CLEAR_SCOPE,\n  RECEIVE_SCOPE,\n  EXTEND_SCOPE,\n  SET_SCOPE_ITEM,\n  ADD_ITEM_TO_SCOPE,\n  RECEIVE_SOURCE,\n  RECEIVE_SOURCES,\n  SELECT_FILE,\n  SET_FILE_ITEM,\n  SET_EDITOR_LINE,\n  SELECT_FRAME,\n  PAUSE,\n  RESUME,\n  SET_DIMENSIONS,\n  TOGGLE_TOOLTIPS\n} from '../actions'\n\nexport function tab (state = 'sources', {type, payload}) {\n  if (type !== FOCUS_TAB) return state\n  return (payload + '').toLowerCase()\n}\n\nexport function panel (state = 'console', {type, payload}) {\n  if (type !== FOCUS_PANEL) return state\n  return payload\n}\n\nexport function sources (state = [], {type, payload}) {\n  if (type !== RECEIVE_SOURCES) return state\n  return payload\n}\n\nexport function files (state = [], {type, payload}) {\n  if (type !== RECEIVE_SOURCES) return state\n  const sources = payload.map(s => s.name)\n\n  const nonNative = sources.filter(s => s[0] === sep)\n    .reduce((o, path) => {\n      let next = o\n      path.split(sep).filter(Boolean).forEach((segment, ix, arr) => {\n        next[segment] = {value: {}}\n\n        if (ix === arr.length - 1) {\n          next[segment].data = {path}\n          next[segment].options = {terminate: true}\n        }\n        next = next[segment].value\n      })\n      return o\n    }, {})\n\n  const native = {\n    '(core)': {\n      value: sources\n        .filter(s => s[0] !== sep)\n        .reduce((o, f) => {\n          o[f] = {\n            value: {},\n            options: {terminate: true},\n            data: {path: f}\n          }\n          return o\n        }, {})\n    }\n  }\n\n  return {...native, ...nonNative}\n}\n\nexport function file (state = '', {type, payload}) {\n  if (type !== SELECT_FILE) return state\n  return payload\n}\n\nexport function fileItem (state = null, {type, payload = state}) {\n  if (type !== SET_FILE_ITEM) return state\n  return payload\n}\n\nexport function scopeItem (state = null, {type, payload = state}) {\n  if (type !== SET_SCOPE_ITEM) return state\n  return payload\n}\n\nexport function editorLine (state = 0, {type, payload}) {\n  if (type !== SET_EDITOR_LINE) return state\n  return payload\n}\n\nexport function callstack (state = [], {type, payload = []}) {\n  if (type !== RECEIVE_CALLSTACK) return state\n  return payload.map(({\n      functionName,\n      location: {lineNumber: l, columnNumber: c, url}\n    }) => (\n      (functionName || '(anonymous function)') + ' ' + basename(url) + ':' + l + ':' + c\n    )\n  )\n}\n\nexport function frames (state = [], {type, payload = []}) {\n  if (type !== RECEIVE_CALLSTACK) return state\n  return payload\n}\n\nexport function frame (state = {}, {type, payload}) {\n  if (type !== SELECT_FRAME) return state\n  return payload\n}\n\nexport function breaks (state = [], {type, payload}) {\n  if (type !== RECEIVE_BREAKPOINTS) return state\n  return payload\n}\n\nexport function breakpoints (state = [], {type, payload}) {\n  if (type !== RECEIVE_BREAKPOINTS) return state\n  return payload.map(({script_name: name, line}) => basename(name) + ':' + line)\n}\n\nexport function scope (state = {}, {type, payload: {area, scope, branch, namespace} = {}}) {\n  if (type === CLEAR_SCOPE) return {}\n\n  if (type === RECEIVE_SCOPE) {\n    return {\n      ...state,\n      [area]: {\n        options: {labelling: false},\n        value: treeify(scope)\n      }\n    }\n  }\n\n  if (type === EXTEND_SCOPE) {\n    // branch is still ref'd in state, altering the branch updates\n    // the state, but we want want to return a new state object to\n    // observe the rule of immutability. If this every breaks (due to branch\n    // being a copy instead of a direct ref, then we'd need to do a deep find\n    // on the state to locate the branch - along with that we'd need to add uids\n    // to every branch))\n    branch.value = treeify(scope)\n    return {...state}\n  }\n\n  if (type === ADD_ITEM_TO_SCOPE) {\n    state[area].value = {\n      [namespace]: Object(scope) === scope \n        ? {\n          label: 'Object',\n          value: !scope.length \n            ? {'« empty »': {options: {labelling: false}}}\n            : treeify(scope)\n        }\n        : {value: scope},\n      ...state[area].value\n    }\n\n    return {...state}\n  }\n\n  return state\n\n}\n\nexport function source (state = {}, {type, payload}) {\n  if (type !== RECEIVE_SOURCE) return state\n  return payload\n}\n\nexport function paused (state = false, {type}) {\n  if (type !== RESUME && type !== PAUSE) return state\n  return type === PAUSE\n}\n\nexport function layout (state = {}, {type, payload}) {\n  if (type !== SET_DIMENSIONS) return state\n  return payload\n}\n\nexport function tooltips (state = true, {type}) {\n  if (type !== TOGGLE_TOOLTIPS) return state\n  return !state\n}\n\n// utils:\n\nfunction treeify (scope) {\n  return scope.reduce((o, {name, type, value, text, source, className, properties, handle}) => {\n    if (type === 'object') { value = className }\n    if (className === 'Array') {\n      value = 'Array(' + properties.filter(({name}) => !isNaN(name)).length + ')'\n    }\n    if (type === 'string') {\n      value = '\\'' + value + '\\''\n    }\n    value = value || source || text\n    o[name] = properties\n      ? properties.length\n        ? {label: value, value: {}, meta: {handle}}\n        : {label: value, value: {'« empty »': {options: {labelling: false}}}}\n      : {value}\n\n    return o\n  }, {})\n}\n"]}